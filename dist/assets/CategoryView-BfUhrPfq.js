import{j as z,k as Z,h as n,a as g,l as R,w as V,m as P,b as e,v as T,T as M,F as C,r as $,i as G,u as K,R as X,n as D,p as H,t as _,f as x,o as J,d as Q,q as W,e as v,s as ee,_ as te}from"./index-CJeJ__NP.js";const oe={class:"fixed left-0 top-0 z-50 h-full w-full max-w-sm overflow-y-auto border-r border-gray-200 bg-white shadow-xl","aria-label":"Filtros y orden"},se={class:"px-4 py-6 space-y-8"},ae={class:"mt-3 flex flex-col gap-1"},le={class:"mt-3 flex flex-col gap-1"},re=["onClick"],ne={class:"mt-3 space-y-2"},ie={class:"flex cursor-pointer items-center gap-3 rounded-lg px-3 py-2 hover:bg-gray-50"},ce=["checked"],ue={class:"flex cursor-pointer items-center gap-3 rounded-lg px-3 py-2 hover:bg-gray-50"},de=["checked"],ge={__name:"CategoryFiltersSidebar",props:{modelValue:{type:Boolean,default:!1},categories:{type:Array,default:()=>[]},currentCategorySlug:{type:String,default:""},sortBy:{type:String,default:""},refinements:{type:Object,default:()=>({})}},emits:["update:modelValue","update:sortBy","update:refinements"],setup(u,{emit:S}){const m=u,h=S,w=x({get:()=>m.modelValue,set:r=>h("update:modelValue",r)}),d=[{value:"name-asc",label:"Nombre A-Z"},{value:"name-desc",label:"Nombre Z-A"},{value:"price-asc",label:"Precio: menor a mayor"},{value:"price-desc",label:"Precio: mayor a menor"}];function b(){w.value=!1}function p(r){r.key==="Escape"&&b()}z(()=>m.modelValue,r=>{r?document.addEventListener("keydown",p):document.removeEventListener("keydown",p)},{immediate:!0}),Z(()=>{document.removeEventListener("keydown",p)});function I(r){h("update:sortBy",r)}function f(r){const t={...m.refinements,[r]:!m.refinements[r]};h("update:refinements",t)}return(r,t)=>(n(),g(C,null,[R(M,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:V(()=>[P(e("div",{class:"fixed inset-0 z-40 bg-black/30","aria-hidden":"true",onClick:t[0]||(t[0]=l=>r.$emit("update:modelValue",!1))},null,512),[[T,u.modelValue]])]),_:1}),R(M,{"enter-active-class":"transition-transform duration-200 ease-out","enter-from-class":"-translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition-transform duration-200 ease-in","leave-from-class":"translate-x-0","leave-to-class":"-translate-x-full"},{default:V(()=>[P(e("aside",oe,[e("div",{class:"flex items-center justify-between border-b border-gray-200 px-4 py-4"},[t[4]||(t[4]=e("h2",{class:"text-lg font-semibold text-[#141642]"},"Filtros",-1)),e("button",{type:"button",class:"flex h-9 w-9 items-center justify-center rounded-full text-gray-500 transition hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#141642]/30","aria-label":"Cerrar (Esc)",onClick:b},[...t[3]||(t[3]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",se,[e("section",null,[t[5]||(t[5]=e("h3",{class:"text-sm font-semibold uppercase tracking-wide text-gray-500"},"Explorar",-1)),e("nav",ae,[(n(!0),g(C,null,$(u.categories,l=>(n(),G(K(X),{key:l.slug,to:l.to,class:D(["rounded-lg px-3 py-2 text-gray-700 transition hover:bg-gray-50 hover:text-[#141642]",u.currentCategorySlug===l.slug&&"bg-[#141642]/10 font-medium text-[#141642]"]),onClick:b},{default:V(()=>[H(_(l.title),1)]),_:2},1032,["to","class"]))),128))])]),e("section",null,[t[6]||(t[6]=e("h3",{class:"text-sm font-semibold uppercase tracking-wide text-gray-500"},"Ordenar por",-1)),e("div",le,[(n(),g(C,null,$(d,l=>e("button",{key:l.value,type:"button",class:D(["rounded-lg px-3 py-2 text-left text-sm text-gray-700 transition hover:bg-gray-50 hover:text-[#141642]",u.sortBy===l.value&&"bg-[#141642]/10 font-medium text-[#141642]"]),onClick:k=>I(l.value)},_(l.label),11,re)),64))])]),e("section",null,[t[9]||(t[9]=e("h3",{class:"text-sm font-semibold uppercase tracking-wide text-gray-500"},"Refinar",-1)),e("div",ne,[e("label",ie,[e("input",{type:"checkbox",checked:u.refinements.inStock,class:"h-4 w-4 rounded border-gray-300 text-[#141642] focus:ring-[#141642]/20",onChange:t[1]||(t[1]=l=>f("inStock"))},null,40,ce),t[7]||(t[7]=e("span",{class:"text-sm text-gray-700"},"En stock",-1))]),e("label",ue,[e("input",{type:"checkbox",checked:u.refinements.onSale,class:"h-4 w-4 rounded border-gray-300 text-[#141642] focus:ring-[#141642]/20",onChange:t[2]||(t[2]=l=>f("onSale"))},null,40,de),t[8]||(t[8]=e("span",{class:"text-sm text-gray-700"},"Ofertas",-1))])])])])],512),[[T,u.modelValue]])]),_:1})],64))}},me={class:"min-h-screen bg-white"},pe={class:"relative min-h-[40vh] overflow-hidden bg-gray-900 md:min-h-[50vh]"},ye=["src","alt"],fe={class:"relative flex min-h-[40vh] items-end px-4 pb-8 md:min-h-[50vh] md:px-6 md:pb-10"},ve={class:"text-3xl font-semibold tracking-wide text-white drop-shadow md:text-4xl lg:text-5xl"},be={class:"border-b border-gray-200 bg-white px-4 py-3 md:px-6"},xe={class:"mx-auto flex max-w-7xl flex-wrap items-center justify-between gap-3"},he={class:"text-sm text-gray-500"},we={class:"mx-auto max-w-7xl px-4 py-8 md:px-6 md:py-10"},ke={key:0,class:"grid grid-cols-2 gap-4 sm:gap-6 md:grid-cols-3 lg:grid-cols-4"},Ce={key:1,class:"grid grid-cols-2 gap-4 sm:gap-6 md:grid-cols-3 lg:grid-cols-4"},_e={key:2,class:"py-12 text-center text-gray-500"},c="/img/colecciones/decoracion.webp",Ue={__name:"CategoryView",setup(u){const S=ee(),m=[{slug:"vajilla",title:"Vajilla",imageUrl:"/img/colecciones/vajillas.webp",to:"/colecciones/vajilla"},{slug:"servilletas",title:"Servilletas",imageUrl:"/img/colecciones/servilletas.webp",to:"/colecciones/servilletas"},{slug:"decoracion",title:"Elementos de decoración",imageUrl:"/img/colecciones/decoracion.webp",to:"/colecciones/decoracion"},{slug:"elementos-de-decoracion",title:"Elementos de decoración",imageUrl:"/img/colecciones/decoracion.webp",to:"/colecciones/elementos-de-decoracion"},{slug:"cubiertos",title:"Cubiertos",imageUrl:"/img/colecciones/cubiertos.webp",to:"/colecciones/cubiertos"},{slug:"cristaleria",title:"Cristalería",imageUrl:"/img/colecciones/cristaleria.webp",to:"/colecciones/cristaleria"},{slug:"alturas",title:"Alturas",imageUrl:c,to:"/colecciones/alturas"},{slug:"articulos-de-cocina",title:"Artículos de cocina",imageUrl:c,to:"/colecciones/articulos-de-cocina"},{slug:"bar",title:"Bar",imageUrl:c,to:"/colecciones/bar"},{slug:"floreros",title:"Floreros",imageUrl:c,to:"/colecciones/floreros"},{slug:"shots",title:"Shots",imageUrl:c,to:"/colecciones/shots"},{slug:"pocillos",title:"Pocillos",imageUrl:c,to:"/colecciones/pocillos"},{slug:"madera",title:"Madera",imageUrl:c,to:"/colecciones/madera"},{slug:"fuente",title:"Fuente",imageUrl:c,to:"/colecciones/fuente"},{slug:"espejos",title:"Espejos",imageUrl:c,to:"/colecciones/espejos"}],h={vajilla:{categoryId:17},servilletas:{categoryId:12},decoracion:{categoryId:11},"elementos-de-decoracion":{categoryId:11},cubiertos:{categoryId:18},cristaleria:{categoryId:10},alturas:{categoryId:13},"articulos-de-cocina":{categoryId:14},bar:{categoryId:15},floreros:{categoryId:16},shots:{categoryId:19},pocillos:{categoryId:20},madera:{categoryId:21},fuente:{categoryId:22},espejos:{categoryId:23}},w=v(!1),d=v("name-asc"),b=v({inStock:!1,onSale:!1}),p=x(()=>(S.params.slug||"vajilla").toLowerCase()),I=x(()=>m.find(s=>s.slug.toLowerCase()===p.value)??m[0]),f=x(()=>{var s;return((s=I.value)==null?void 0:s.title)||"Colección"}),r=x(()=>{var s;return((s=I.value)==null?void 0:s.imageUrl)||c}),t=v([]),l=v(0),k=v(!1),A=v(null),U=x(()=>{let s=[...t.value];const a=d.value;return a==="name-asc"?s.sort((o,i)=>o.title.localeCompare(i.title)):a==="name-desc"?s.sort((o,i)=>i.title.localeCompare(o.title)):a==="price-asc"?s.sort((o,i)=>o.price-i.price):a==="price-desc"&&s.sort((o,i)=>i.price-o.price),s});function B(){const s=f.value||"La Mesa de Nora";document.title=`${s} | La Mesa de Nora`}async function L(){k.value=!0,A.value=null;const s={},a=h[p.value]||{};a.categoryId&&(s.category=a.categoryId);try{const o=await W({page:1,per_page:24,sort:d.value==="price-asc"?"price":d.value==="price-desc"?"-price":d.value==="name-desc"?"-name":"name",filters:s}),i=a.categoryId??null;t.value=(o.data??[]).map(y=>{var N,F,O;const E=y.categories??[],q=i&&E.length?((N=E.find(Y=>Y.id===i))==null?void 0:N.name)??((F=E[0])==null?void 0:F.name):((O=E[0])==null?void 0:O.name)??f.value;return{id:y.id,title:y.name,category:q,price:y.price,imageUrl:y.cover||"",imageAlt:y.name,to:y.slug?`/product/${y.slug}`:""}}),l.value=o.total??t.value.length}catch{A.value="No se pudieron cargar los productos.",t.value=[],l.value=0}finally{k.value=!1}}function j(){w.value=!0}return J(()=>{B(),L()}),z([p,d],()=>{B(),L()}),(s,a)=>(n(),g("div",me,[e("section",pe,[e("img",{src:r.value,alt:f.value,class:"absolute inset-0 h-full w-full object-cover opacity-70"},null,8,ye),e("div",fe,[e("h1",ve,_(f.value),1)])]),e("div",be,[e("div",xe,[e("div",{class:"flex flex-wrap gap-2"},[e("button",{type:"button",class:"rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 transition hover:border-[#141642] hover:bg-[#141642]/5 hover:text-[#141642] focus:outline-none focus:ring-2 focus:ring-[#141642]/20",onClick:j}," EXPLORAR "),e("button",{type:"button",class:"rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 transition hover:border-[#141642] hover:bg-[#141642]/5 hover:text-[#141642] focus:outline-none focus:ring-2 focus:ring-[#141642]/20",onClick:j}," ORDENAR POR "),e("button",{type:"button",class:"rounded-lg border border-gray-200 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 transition hover:border-[#141642] hover:bg-[#141642]/5 hover:text-[#141642] focus:outline-none focus:ring-2 focus:ring-[#141642]/20",onClick:j}," REFINAR ")]),e("p",he,_(U.value.length)+" producto"+_(U.value.length!==1?"s":""),1)])]),R(ge,{modelValue:w.value,"onUpdate:modelValue":a[0]||(a[0]=o=>w.value=o),categories:m,"current-category-slug":p.value,"sort-by":d.value,"onUpdate:sortBy":a[1]||(a[1]=o=>d.value=o),refinements:b.value,"onUpdate:refinements":a[2]||(a[2]=o=>b.value=o)},null,8,["modelValue","current-category-slug","sort-by","refinements"]),e("div",we,[k.value?(n(),g("div",ke,[(n(),g(C,null,$(8,o=>e("div",{key:o,class:"flex flex-col overflow-hidden rounded-2xl border border-gray-100 bg-white p-3 md:p-4"},[...a[3]||(a[3]=[e("div",{class:"mb-3 aspect-square w-full rounded-xl bg-gray-100 animate-pulse"},null,-1),e("div",{class:"h-3 w-16 rounded bg-gray-100 mb-2 animate-pulse"},null,-1),e("div",{class:"h-4 w-full rounded bg-gray-100 mb-3 animate-pulse"},null,-1),e("div",{class:"h-4 w-20 rounded bg-gray-100 mt-auto animate-pulse"},null,-1)])])),64))])):(n(),g("div",Ce,[(n(!0),g(C,null,$(U.value,o=>(n(),G(te,{key:o.id,title:o.title,category:o.category,price:o.price,"image-url":o.imageUrl,"image-alt":o.imageAlt,to:o.to},null,8,["title","category","price","image-url","image-alt","to"]))),128))])),!k.value&&U.value.length===0?(n(),g("p",_e," No hay productos en esta categoría. ")):Q("",!0)])]))}};export{Ue as default};
