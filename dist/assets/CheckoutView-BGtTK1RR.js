import{c as ge,x as ve,o as be,e as g,j as xe,a as d,b as e,u as S,l as X,w as Z,R as ee,y as ye,t as a,d as k,F,r as q,p as x,D as H,n as G,m as f,v as te,z as h,E,i as ke,A as we,f as j,G as he,h as i,H as Ce}from"./index-CJeJ__NP.js";async function Se(){const{data:K}=await ge.get("/carriers");return K}const _e={class:"min-h-screen bg-white"},Te={key:0,class:"mx-auto max-w-lg px-4 py-16 text-center"},De={key:1,class:"mx-auto max-w-2xl px-4 py-12"},ze={key:0,class:"mt-10 rounded-2xl border border-gray-200 bg-gray-50/50 p-6 text-left"},Ve={class:"space-y-6"},je={key:0},Re={class:"mt-1 text-gray-900"},Le={class:"mt-1 text-lg font-semibold text-[#141642]"},$e={class:"mt-1 text-xl font-bold text-[#141642]"},Ue={class:"mt-2 space-y-2"},Ee={class:"text-gray-700"},Me={key:0,class:"block text-xs text-gray-500"},Be={class:"text-gray-500"},Pe={class:"shrink-0 font-medium"},Fe={class:"mt-1 text-gray-900"},Ie={class:"mt-1 text-gray-900"},Ne={class:"mt-2 space-y-1 text-sm text-gray-700"},Oe={key:2,class:"mx-auto max-w-5xl px-4 py-10 md:px-6 md:py-14"},Ae={class:"grid gap-10 lg:grid-cols-5 lg:gap-14"},qe={class:"lg:col-span-3 space-y-8"},He={class:"flex items-center justify-between p-4"},Ge={class:"flex items-center gap-3"},Je={class:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full bg-[#141642]/10 text-[#141642]"},Ke={class:"text-sm text-gray-500"},Ye={key:0,class:"inline-flex items-center gap-1 rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800"},Qe={class:"overflow-hidden transition-all"},We={class:"border-x border-b border-gray-200 px-4 pb-6 pt-4"},Xe={key:0,class:"mt-4 rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-700"},Ze={class:"flex items-center justify-between p-4"},et={class:"flex items-center gap-3"},tt={class:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full bg-[#141642]/10 text-[#141642]"},ot={class:"text-sm text-gray-500"},rt={key:0,class:"inline-flex items-center gap-1 rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800"},at={class:"overflow-hidden transition-all"},lt={class:"space-y-4"},nt={class:"mt-2 flex gap-4"},st={class:"flex cursor-pointer items-center gap-2"},it={class:"flex cursor-pointer items-center gap-2"},ut={key:0,class:"space-y-4 rounded-xl border border-gray-200 bg-gray-50/50 p-4"},dt={class:"lg:col-span-2"},ct={class:"sticky top-24 rounded-2xl border border-gray-200 bg-gray-50/50 p-5 md:p-6"},mt={key:0,class:"mt-4 rounded-xl border border-[#141642]/20 bg-[#141642]/5 px-4 py-3"},pt={class:"mt-1 text-sm font-medium text-[#141642]"},ft={class:"mt-4 space-y-3 max-h-64 overflow-y-auto"},gt={class:"h-14 w-14 shrink-0 overflow-hidden rounded-lg bg-gray-100"},vt=["src","alt"],bt={class:"min-w-0 flex-1"},xt={class:"text-sm font-medium text-gray-900 line-clamp-2"},yt={key:0,class:"mt-0.5 text-xs text-gray-500"},kt={key:1,class:"mt-0.5 text-xs text-gray-500"},wt={class:"text-sm font-medium text-[#141642]"},ht={class:"mt-4 border-t border-gray-200 pt-4 space-y-2 text-sm"},Ct={class:"flex justify-between text-gray-600"},St={class:"flex justify-between text-gray-600"},_t={class:"flex justify-between border-t border-gray-200 pt-3 text-base font-semibold text-[#141642]"},Tt={class:"mt-5 border-t border-gray-200 pt-5"},Dt=["value"],zt={class:"flex-1 font-medium text-gray-900"},Vt={class:"mt-5 border-t border-gray-200 pt-5"},jt={class:"mt-3 flex cursor-pointer items-center gap-3 rounded-xl border border-gray-200 bg-white p-4 transition hover:bg-gray-50"},Rt={class:"mt-3 flex cursor-pointer items-center gap-3 rounded-xl border border-gray-200 bg-white p-4 transition hover:bg-gray-50"},Lt=["disabled"],$t={class:"max-w-md w-full rounded-2xl bg-white p-6 shadow-xl",role:"dialog","aria-labelledby":"popup-titulo","aria-modal":"true"},Ut={class:"mt-4 space-y-3 rounded-xl bg-gray-50 p-4 text-sm"},Et={class:"mt-6 flex gap-3"},J="lmdn_checkout_contacto",Bt={__name:"CheckoutView",setup(K){const oe=he(),y=ve();be(async()=>{var s;try{const t=localStorage.getItem(J);if(t){const r=JSON.parse(t);(r!=null&&r.nombre||r!=null&&r.email||r!=null&&r.telefono||r!=null&&r.direccion)&&(l.value={nombre:r.nombre??"",email:r.email??"",telefono:r.telefono??"",direccion:r.direccion??"",comuna:r.comuna??"",comentarios:r.comentarios??""},r.tipoDocumento&&(c.value=r.tipoDocumento),r.factura&&c.value==="factura"&&(n.value={rut:r.factura.rut??"",razonSocial:r.factura.razonSocial??"",giro:r.factura.giro??"",direccionTributaria:r.factura.direccionTributaria??""}),r.nombre&&r.email&&r.telefono&&r.direccion&&(z.value=!1),(r.tipoDocumento==="boleta"||r.tipoDocumento==="factura"&&((s=r.factura)!=null&&s.razonSocial))&&(V.value=!1))}}catch{}y.loadCart();try{const{carriers:t}=await Se();Array.isArray(t)&&t.length>0?(_.value=t.map(r=>({id:r.id,nombre:r.nombre||"Entrega"})),_.value.length>0&&!_.value.some(r=>r.id===$.value)&&($.value=_.value[0].id)):_.value=[{id:4,nombre:"Entrega"}]}catch{_.value=[{id:4,nombre:"Entrega"}]}});const l=g({nombre:"",email:"",telefono:"",direccion:"",comuna:"",comentarios:""}),c=g("boleta"),n=g({rut:"",razonSocial:"",giro:"",direccionTributaria:""}),R=g(!1),M=g(!1),m=g(null),L=g(""),T=g("transferencia"),$=g(4),I=g(!1),U=g(!1),_=g([{id:4,nombre:"Entrega"}]),z=g(!0),Y=g(null),V=g(!0),Q=g(null),w={empresa:"Nueva Consentido SPA",rut:"77.227.749-0",banco:"Santander",tipoCuenta:"Cuenta Corriente",numeroCuenta:"78271752"},re=j(()=>`Empresa: ${w.empresa}
RUT: ${w.rut}
Banco: ${w.banco}
Tipo de cuenta: ${w.tipoCuenta}
Número de cuenta: ${w.numeroCuenta}`);function ae(){I.value=!0,U.value=!1}function N(){I.value=!1}async function le(){try{await navigator.clipboard.writeText(re.value),U.value=!0,setTimeout(()=>{U.value=!1},2e3)}catch{U.value=!1}}const O=j(()=>{var t,r,u,v,p,C,o,b;return((t=l.value.nombre)==null?void 0:t.trim())&&((r=l.value.email)==null?void 0:r.trim())&&((u=l.value.telefono)==null?void 0:u.trim())&&((v=l.value.direccion)==null?void 0:v.trim())?c.value==="factura"?((p=n.value.rut)==null?void 0:p.trim())&&((C=n.value.razonSocial)==null?void 0:C.trim())&&((o=n.value.giro)==null?void 0:o.trim())&&((b=n.value.direccionTributaria)==null?void 0:b.trim()):!0:!1});async function ne(){var s,t,r;if(!(!O.value||y.items.length===0)){R.value=!0,L.value="";try{const u=typeof localStorage<"u"?localStorage.getItem("lmdn_reservation_start"):null,v=typeof localStorage<"u"?localStorage.getItem("lmdn_reservation_end"):null,p=await Ce({nombre:l.value.nombre,email:l.value.email,telefono:l.value.telefono,direccion:l.value.direccion,comuna:l.value.comuna,comentarios:l.value.comentarios,tipo_documento:c.value,fechas_reserva:u&&v?{inicio:u,fin:v}:null,factura:c.value==="factura"?{rut:n.value.rut,razon_social:n.value.razonSocial,giro:n.value.giro,direccion_tributaria:n.value.direccionTributaria}:null,metodo_pago:T.value});if(p!=null&&p.success){if(T.value==="mercado_pago"&&((s=p.mercado_pago)!=null&&s.init_point)){window.location.href=p.mercado_pago.init_point;return}const C=_.value.find(D=>D.id===$.value),o=typeof localStorage<"u"?localStorage.getItem("lmdn_reservation_start"):null,b=typeof localStorage<"u"?localStorage.getItem("lmdn_reservation_end"):null;m.value={referencia:p.reference??"",total:y.total,items:[...y.items],transporte:(C==null?void 0:C.nombre)??"Entrega",tipoDocumento:c.value,factura:c.value==="factura"?{...n.value}:null,contacto:{...l.value},fechasReserva:o&&b?{inicio:o,fin:b}:null},M.value=!0,y.clear();try{localStorage.removeItem(J)}catch{}}else L.value=(p==null?void 0:p.message)||"No se pudo crear el pedido."}catch(u){L.value=((r=(t=u==null?void 0:u.response)==null?void 0:t.data)==null?void 0:r.message)||(u==null?void 0:u.message)||"Error al procesar el pedido. Intenta de nuevo."}finally{R.value=!1}}}function se(){M.value=!1,m.value=null,oe.push("/")}const ie={nombre:"María González López",email:"maria.gonzalez@ejemplo.cl",telefono:"+56 9 8765 4321",direccion:"Av. Providencia 1234, Depto 501",comuna:"Providencia",comentarios:"Pedido de prueba para verificar en backoffice."},ue={rut:"12.345.678-9",razonSocial:"Empresa Demo SpA",giro:"Comercio al por menor",direccionTributaria:"Av. Libertador 1000, Santiago"};function de(){l.value={...ie},c.value==="factura"&&(n.value={...ue})}const ce=j(()=>{var t,r,u,v;if(!((t=l.value.nombre)!=null&&t.trim())&&!((r=l.value.email)!=null&&r.trim()))return"Datos de contacto";const s=[];return(u=l.value.nombre)!=null&&u.trim()&&s.push(l.value.nombre.trim()),(v=l.value.email)!=null&&v.trim()&&s.push(l.value.email.trim()),s.length>0?s.join(" · "):"Datos de contacto"}),A=j(()=>{var s,t,r,u;return((s=l.value.nombre)==null?void 0:s.trim())&&((t=l.value.email)==null?void 0:t.trim())&&((r=l.value.telefono)==null?void 0:r.trim())&&((u=l.value.direccion)==null?void 0:u.trim())});function W(){if(A.value)try{const s={...l.value,tipoDocumento:c.value,factura:c.value==="factura"?{...n.value}:null};localStorage.setItem(J,JSON.stringify(s))}catch{}}xe([l,c,n],()=>{W()},{deep:!0});function me(){A.value&&(W(),setTimeout(()=>{const s=Y.value;s&&(s.contains(document.activeElement)||(z.value=!1))},0))}const B=j(()=>({inicio:typeof localStorage<"u"?localStorage.getItem("lmdn_reservation_start"):null,fin:typeof localStorage<"u"?localStorage.getItem("lmdn_reservation_end"):null}));function P(s){return s?new Date(s+"T12:00:00").toLocaleDateString("es-CL",{day:"numeric",month:"long",year:"numeric"}):""}const pe=j(()=>{var s;return c.value==="boleta"?"Boleta":(s=n.value.razonSocial)!=null&&s.trim()?`Factura · ${n.value.razonSocial.trim()}`:"Factura (completar datos)"});function fe(){var t,r,u,v;(c.value==="boleta"||c.value==="factura"&&((t=n.value.rut)!=null&&t.trim())&&((r=n.value.razonSocial)!=null&&r.trim())&&((u=n.value.giro)!=null&&u.trim())&&((v=n.value.direccionTributaria)!=null&&v.trim()))&&setTimeout(()=>{const p=Q.value;p&&(p.contains(document.activeElement)||(V.value=!1))},50)}return(s,t)=>{var r,u,v,p,C;return i(),d("div",_e,[t[66]||(t[66]=e("section",{class:"bg-[#141642] px-4 py-10 text-center md:py-14"},[e("h1",{class:"text-2xl font-semibold tracking-wide text-white md:text-3xl"}," Finalizar pedido "),e("p",{class:"mx-auto mt-2 max-w-md text-sm text-white/85 md:text-base"}," Revisa tu pedido y completa tus datos para confirmar. ")],-1)),S(y).items.length===0&&!M.value?(i(),d("div",Te,[t[18]||(t[18]=e("p",{class:"text-gray-600"},"Tu carrito está vacío.",-1)),X(S(ee),{to:"/",class:"mt-4 inline-block rounded-lg bg-[#141642] px-6 py-3 font-medium text-white transition hover:bg-[#141642]/90"},{default:Z(()=>[...t[17]||(t[17]=[x(" Ver productos ",-1)])]),_:1})])):M.value?(i(),d("div",De,[t[26]||(t[26]=ye('<div class="text-center"><div class="inline-flex h-14 w-14 items-center justify-center rounded-full bg-green-100 text-green-600"><svg class="h-7 w-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><h2 class="mt-4 text-xl font-semibold text-gray-900">Pedido Solicitado</h2><p class="mt-2 text-gray-600"> Te contactaremos a la brevedad para confirmar fechas y forma de pago. </p></div>',1)),m.value?(i(),d("div",ze,[e("div",Ve,[m.value.fechasReserva?(i(),d("div",je,[t[19]||(t[19]=e("p",{class:"text-xs font-medium uppercase tracking-wider text-gray-500"},"Fechas solicitadas",-1)),e("p",Re,a(P(m.value.fechasReserva.inicio))+" — "+a(P(m.value.fechasReserva.fin)),1)])):k("",!0),e("div",null,[t[20]||(t[20]=e("p",{class:"text-xs font-medium uppercase tracking-wider text-gray-500"},"Referencia",-1)),e("p",Le,a(m.value.referencia),1)]),e("div",null,[t[21]||(t[21]=e("p",{class:"text-xs font-medium uppercase tracking-wider text-gray-500"},"Total a pagar",-1)),e("p",$e,"$"+a((m.value.total||0).toLocaleString("es-CL")),1)]),e("div",null,[t[22]||(t[22]=e("p",{class:"text-xs font-medium uppercase tracking-wider text-gray-500"},"Productos",-1)),e("ul",Ue,[(i(!0),d(F,null,q(m.value.items,o=>{var b;return i(),d("li",{key:`${o.product_id}_${o.combination_id??0}`,class:"flex justify-between gap-4 text-sm"},[e("span",Ee,[x(a(o.name)+" ",1),(b=o.attributes)!=null&&b.length?(i(),d("span",Me,a(o.attributes.map(D=>`${D.group}: ${D.value}`).join(" · ")),1)):k("",!0),e("span",Be," × "+a(o.quantity),1)]),e("span",Pe,"$"+a((o.total??(o.unit_price||0)*(o.quantity||0)).toLocaleString("es-CL")),1)])}),128))])]),e("div",null,[t[23]||(t[23]=e("p",{class:"text-xs font-medium uppercase tracking-wider text-gray-500"},"Transporte seleccionado",-1)),e("p",Fe,a(m.value.transporte),1)]),e("div",null,[t[24]||(t[24]=e("p",{class:"text-xs font-medium uppercase tracking-wider text-gray-500"},"Documento",-1)),e("p",Ie,[x(a(m.value.tipoDocumento==="factura"?"Factura":"Boleta")+" ",1),m.value.tipoDocumento==="factura"&&m.value.factura?(i(),d(F,{key:0},[x(" — "+a(m.value.factura.razonSocial)+" · RUT "+a(m.value.factura.rut),1)],64)):k("",!0)])]),e("div",null,[t[25]||(t[25]=e("p",{class:"text-xs font-medium uppercase tracking-wider text-gray-500"},"Datos de contacto",-1)),e("div",Ne,[e("p",null,a((r=m.value.contacto)==null?void 0:r.nombre),1),e("p",null,a((u=m.value.contacto)==null?void 0:u.email),1),e("p",null,a((v=m.value.contacto)==null?void 0:v.telefono),1),e("p",null,a((p=m.value.contacto)==null?void 0:p.direccion)+a((C=m.value.contacto)!=null&&C.comuna?", "+m.value.contacto.comuna:""),1)])])])])):k("",!0),e("div",{class:"mt-10 text-center"},[e("button",{type:"button",class:"rounded-lg bg-[#141642] px-6 py-3 font-medium text-white transition hover:bg-[#141642]/90",onClick:se}," Volver al inicio ")])])):(i(),d("div",Oe,[e("div",Ae,[e("div",qe,[e("form",{id:"checkout-form",onSubmit:H(ne,["prevent"])},[e("div",{ref_key:"formContactoRef",ref:Y},[e("div",{class:"cursor-pointer rounded-xl border border-gray-200 bg-white transition hover:bg-gray-50",onClick:t[0]||(t[0]=o=>z.value=!z.value)},[e("div",He,[e("div",Ge,[e("div",Je,[(i(),d("svg",{class:G(["h-5 w-5 transition-transform",{"rotate-180":z.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[27]||(t[27]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),e("div",null,[t[28]||(t[28]=e("h2",{class:"text-lg font-semibold text-[#141642]"},"Datos de contacto y entrega",-1)),e("p",Ke,a(ce.value),1)])]),A.value?(i(),d("span",Ye,[...t[29]||(t[29]=[e("svg",{class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),x(" Completo ",-1)])])):k("",!0)])]),f(e("div",Qe,[e("div",We,[t[37]||(t[37]=e("p",{class:"text-sm text-gray-500"},"Completa los datos para coordinar la entrega.",-1)),e("button",{type:"button",class:"mt-3 inline-flex items-center gap-2 rounded-lg border border-amber-300 bg-amber-50 px-3 py-1.5 text-sm text-amber-800 transition hover:bg-amber-100 focus:outline-none focus:ring-2 focus:ring-amber-400/50",onClick:H(de,["stop"])},[...t[30]||(t[30]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1),x(" Rellenar con datos de prueba ",-1)])]),L.value?(i(),d("div",Xe,a(L.value),1)):k("",!0),e("div",{class:"mt-6 space-y-5",onFocusout:me},[e("div",null,[t[31]||(t[31]=e("label",{for:"checkout-nombre",class:"block text-sm font-medium text-gray-700"},"Nombre completo *",-1)),f(e("input",{id:"checkout-nombre","onUpdate:modelValue":t[1]||(t[1]=o=>l.value.nombre=o),type:"text",required:"",class:"mt-1 w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-900 placeholder-gray-400 focus:border-[#141642] focus:ring-2 focus:ring-[#141642]/20",placeholder:"Tu nombre"},null,512),[[h,l.value.nombre]])]),e("div",null,[t[32]||(t[32]=e("label",{for:"checkout-email",class:"block text-sm font-medium text-gray-700"},"Correo electrónico *",-1)),f(e("input",{id:"checkout-email","onUpdate:modelValue":t[2]||(t[2]=o=>l.value.email=o),type:"email",required:"",class:"mt-1 w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-900 placeholder-gray-400 focus:border-[#141642] focus:ring-2 focus:ring-[#141642]/20",placeholder:"tu@correo.com"},null,512),[[h,l.value.email]])]),e("div",null,[t[33]||(t[33]=e("label",{for:"checkout-telefono",class:"block text-sm font-medium text-gray-700"},"Teléfono *",-1)),f(e("input",{id:"checkout-telefono","onUpdate:modelValue":t[3]||(t[3]=o=>l.value.telefono=o),type:"tel",required:"",class:"mt-1 w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-900 placeholder-gray-400 focus:border-[#141642] focus:ring-2 focus:ring-[#141642]/20",placeholder:"+56 9 1234 5678"},null,512),[[h,l.value.telefono]])]),e("div",null,[t[34]||(t[34]=e("label",{for:"checkout-direccion",class:"block text-sm font-medium text-gray-700"},"Dirección de entrega *",-1)),f(e("input",{id:"checkout-direccion","onUpdate:modelValue":t[4]||(t[4]=o=>l.value.direccion=o),type:"text",required:"",class:"mt-1 w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-900 placeholder-gray-400 focus:border-[#141642] focus:ring-2 focus:ring-[#141642]/20",placeholder:"Calle, número, depto"},null,512),[[h,l.value.direccion]])]),e("div",null,[t[35]||(t[35]=e("label",{for:"checkout-comuna",class:"block text-sm font-medium text-gray-700"},"Comuna",-1)),f(e("input",{id:"checkout-comuna","onUpdate:modelValue":t[5]||(t[5]=o=>l.value.comuna=o),type:"text",class:"mt-1 w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-900 placeholder-gray-400 focus:border-[#141642] focus:ring-2 focus:ring-[#141642]/20",placeholder:"Ej: Las Condes"},null,512),[[h,l.value.comuna]])]),e("div",null,[t[36]||(t[36]=e("label",{for:"checkout-comentarios",class:"block text-sm font-medium text-gray-700"},"Comentarios",-1)),f(e("textarea",{id:"checkout-comentarios","onUpdate:modelValue":t[6]||(t[6]=o=>l.value.comentarios=o),rows:"3",class:"mt-1 w-full resize-y rounded-lg border border-gray-300 px-4 py-3 text-gray-900 placeholder-gray-400 focus:border-[#141642] focus:ring-2 focus:ring-[#141642]/20",placeholder:"Indicaciones adicionales para la entrega..."},null,512),[[h,l.value.comentarios]])])],32)])],512),[[te,z.value]])],512),e("div",{ref_key:"formDocumentoRef",ref:Q,class:"mt-2"},[e("div",{class:"cursor-pointer rounded-xl border border-gray-200 bg-white transition hover:bg-gray-50",onClick:t[7]||(t[7]=o=>V.value=!V.value)},[e("div",Ze,[e("div",et,[e("div",tt,[(i(),d("svg",{class:G(["h-5 w-5 transition-transform",{"rotate-180":V.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[38]||(t[38]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),e("div",null,[t[39]||(t[39]=e("h2",{class:"text-lg font-semibold text-[#141642]"},"Tipo de documento",-1)),e("p",ot,a(pe.value),1)])]),c.value==="boleta"||c.value==="factura"&&n.value.rut&&n.value.razonSocial&&n.value.giro&&n.value.direccionTributaria?(i(),d("span",rt,[...t[40]||(t[40]=[e("svg",{class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),x(" Completo ",-1)])])):k("",!0)])]),f(e("div",at,[e("div",{class:"rounded-b-xl border-x border-b border-gray-200 px-4 pb-6 pt-4",onFocusout:fe},[e("div",lt,[e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700"},"Tipo de documento *",-1)),e("div",nt,[e("label",st,[f(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>c.value=o),type:"radio",value:"boleta",class:"h-4 w-4 border-gray-300 text-[#141642] focus:ring-[#141642]"},null,512),[[E,c.value]]),t[41]||(t[41]=e("span",{class:"text-sm font-medium text-gray-900"},"Boleta",-1))]),e("label",it,[f(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>c.value=o),type:"radio",value:"factura",class:"h-4 w-4 border-gray-300 text-[#141642] focus:ring-[#141642]"},null,512),[[E,c.value]]),t[42]||(t[42]=e("span",{class:"text-sm font-medium text-gray-900"},"Factura",-1))])])]),c.value==="factura"?(i(),d("div",ut,[t[48]||(t[48]=e("h3",{class:"text-sm font-semibold text-[#141642]"},"Datos para facturar",-1)),e("div",null,[t[44]||(t[44]=e("label",{for:"checkout-rut",class:"block text-sm font-medium text-gray-700"},"RUT *",-1)),f(e("input",{id:"checkout-rut","onUpdate:modelValue":t[10]||(t[10]=o=>n.value.rut=o),type:"text",class:"mt-1 w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-900 placeholder-gray-400 focus:border-[#141642] focus:ring-2 focus:ring-[#141642]/20",placeholder:"12.345.678-9"},null,512),[[h,n.value.rut]])]),e("div",null,[t[45]||(t[45]=e("label",{for:"checkout-razon-social",class:"block text-sm font-medium text-gray-700"},"Razón social *",-1)),f(e("input",{id:"checkout-razon-social","onUpdate:modelValue":t[11]||(t[11]=o=>n.value.razonSocial=o),type:"text",class:"mt-1 w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-900 placeholder-gray-400 focus:border-[#141642] focus:ring-2 focus:ring-[#141642]/20",placeholder:"Nombre o razón social"},null,512),[[h,n.value.razonSocial]])]),e("div",null,[t[46]||(t[46]=e("label",{for:"checkout-giro",class:"block text-sm font-medium text-gray-700"},"Giro *",-1)),f(e("input",{id:"checkout-giro","onUpdate:modelValue":t[12]||(t[12]=o=>n.value.giro=o),type:"text",class:"mt-1 w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-900 placeholder-gray-400 focus:border-[#141642] focus:ring-2 focus:ring-[#141642]/20",placeholder:"Actividad económica"},null,512),[[h,n.value.giro]])]),e("div",null,[t[47]||(t[47]=e("label",{for:"checkout-direccion-tributaria",class:"block text-sm font-medium text-gray-700"},"Dirección tributaria *",-1)),f(e("input",{id:"checkout-direccion-tributaria","onUpdate:modelValue":t[13]||(t[13]=o=>n.value.direccionTributaria=o),type:"text",class:"mt-1 w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-900 placeholder-gray-400 focus:border-[#141642] focus:ring-2 focus:ring-[#141642]/20",placeholder:"Dirección fiscal"},null,512),[[h,n.value.direccionTributaria]])])])):k("",!0)])],32)],512),[[te,V.value]])],512)],32)]),e("div",dt,[e("div",ct,[t[58]||(t[58]=e("h2",{class:"text-lg font-semibold text-[#141642]"},"Resumen del pedido",-1)),B.value.inicio&&B.value.fin?(i(),d("div",mt,[t[49]||(t[49]=e("p",{class:"text-xs font-medium uppercase tracking-wider text-gray-500"},"Fechas solicitadas",-1)),e("p",pt,a(P(B.value.inicio))+" — "+a(P(B.value.fin)),1)])):k("",!0),e("ul",ft,[(i(!0),d(F,null,q(S(y).items,o=>{var b;return i(),d("li",{key:`${o.product_id}_${o.combination_id??0}`,class:"flex gap-3 rounded-xl border border-gray-100 bg-white p-3"},[e("div",gt,[e("img",{src:o.cover_url||"/img/colecciones/vajillas.webp",alt:o.name,class:"h-full w-full object-cover"},null,8,vt)]),e("div",bt,[e("p",xt,a(o.name),1),(b=o.attributes)!=null&&b.length?(i(),d("p",yt,a(o.attributes.map(D=>`${D.group}: ${D.value}`).join(" · ")),1)):o.reference?(i(),d("p",kt,"Ref: "+a(o.reference),1)):k("",!0),e("p",wt,a(o.quantity)+" × $"+a((o.unit_price||0).toLocaleString("es-CL")),1)])])}),128))]),e("div",ht,[e("div",Ct,[t[50]||(t[50]=e("span",null,"Subtotal",-1)),e("span",null,"$"+a(S(y).subtotal.toLocaleString("es-CL")),1)]),e("div",St,[t[51]||(t[51]=e("span",null,"IVA (19%)",-1)),e("span",null,"$"+a(S(y).iva.toLocaleString("es-CL")),1)]),e("div",_t,[t[52]||(t[52]=e("span",null,"Total",-1)),e("span",null,"$"+a(S(y).total.toLocaleString("es-CL")),1)])]),e("div",Tt,[t[53]||(t[53]=e("h3",{class:"text-sm font-semibold text-gray-900"},"Transporte",-1)),(i(!0),d(F,null,q(_.value,o=>(i(),d("label",{key:o.id,class:"mt-3 flex cursor-pointer items-center gap-3 rounded-xl border border-gray-200 bg-white p-4 transition hover:bg-gray-50"},[f(e("input",{"onUpdate:modelValue":t[14]||(t[14]=b=>$.value=b),type:"radio",value:o.id,class:"h-4 w-4 border-gray-300 text-[#141642] focus:ring-[#141642]"},null,8,Dt),[[E,$.value]]),e("span",zt,a(o.nombre),1)]))),128))]),e("div",Vt,[t[56]||(t[56]=e("h3",{class:"text-sm font-semibold text-gray-900"},"Medio de pago",-1)),e("label",jt,[f(e("input",{"onUpdate:modelValue":t[15]||(t[15]=o=>T.value=o),type:"radio",value:"transferencia",class:"h-4 w-4 border-gray-300 text-[#141642] focus:ring-[#141642]"},null,512),[[E,T.value]]),t[54]||(t[54]=e("span",{class:"flex-1 font-medium text-gray-900"},"Transferencia bancaria",-1))]),e("label",Rt,[f(e("input",{"onUpdate:modelValue":t[16]||(t[16]=o=>T.value=o),type:"radio",value:"mercado_pago",class:"h-4 w-4 border-gray-300 text-[#141642] focus:ring-[#141642]"},null,512),[[E,T.value]]),t[55]||(t[55]=e("span",{class:"flex-1 font-medium text-gray-900"},"Tarjetas / Mercado Pago",-1))]),T.value==="transferencia"?(i(),d("button",{key:0,type:"button",onClick:ae,class:"mt-3 w-full rounded-lg border border-[#141642] bg-white py-2.5 text-sm font-medium text-[#141642] transition hover:bg-[#141642]/5"}," Mostrar datos ")):k("",!0)]),e("button",{type:"submit",form:"checkout-form",disabled:!O.value||R.value||S(y).items.length===0,class:G(["mt-5 w-full rounded-lg py-3.5 font-semibold text-white transition focus:outline-none focus:ring-2 focus:ring-[#141642] focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-60",O.value&&!R.value&&S(y).items.length>0?"bg-[#141642] hover:bg-[#141642]/90":"bg-gray-400"])},a(R.value?"Enviando...":"Confirmar pedido"),11,Lt),X(S(ee),{to:"/",class:"mt-3 block text-center text-sm text-[#254B86] hover:underline"},{default:Z(()=>[...t[57]||(t[57]=[x(" Seguir comprando ",-1)])]),_:1})])])])])),(i(),ke(we,{to:"body"},[I.value?(i(),d("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:H(N,["self"])},[e("div",$t,[e("div",{class:"flex items-center justify-between"},[t[60]||(t[60]=e("h2",{id:"popup-titulo",class:"text-lg font-semibold text-[#141642]"},"Datos para transferencia bancaria",-1)),e("button",{type:"button",class:"rounded-lg p-2 text-gray-400 transition hover:bg-gray-100 hover:text-gray-600","aria-label":"Cerrar",onClick:N},[...t[59]||(t[59]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Ut,[e("p",null,[t[61]||(t[61]=e("span",{class:"font-medium text-gray-600"},"Empresa:",-1)),x(" "+a(w.empresa),1)]),e("p",null,[t[62]||(t[62]=e("span",{class:"font-medium text-gray-600"},"RUT:",-1)),x(" "+a(w.rut),1)]),e("p",null,[t[63]||(t[63]=e("span",{class:"font-medium text-gray-600"},"Banco:",-1)),x(" "+a(w.banco),1)]),e("p",null,[t[64]||(t[64]=e("span",{class:"font-medium text-gray-600"},"Tipo de cuenta:",-1)),x(" "+a(w.tipoCuenta),1)]),e("p",null,[t[65]||(t[65]=e("span",{class:"font-medium text-gray-600"},"Número de cuenta:",-1)),x(" "+a(w.numeroCuenta),1)])]),e("div",Et,[e("button",{type:"button",class:"flex-1 rounded-lg bg-[#141642] py-3 font-medium text-white transition hover:bg-[#141642]/90",onClick:le},a(U.value?"¡Copiado!":"Copiar datos"),1),e("button",{type:"button",class:"rounded-lg border border-gray-300 bg-white px-5 py-3 font-medium text-gray-700 transition hover:bg-gray-50",onClick:N}," Cerrar ")])])])):k("",!0)]))])}}};export{Bt as default};
